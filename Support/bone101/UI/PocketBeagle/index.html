---
layout: index
title: PocketBeagle UI
scripts: [ '/Support/script/bonescript-demo.js' ]
style: |
  div#wrapper {
    width:1224px;
  }
  div#cssmenu {
    width:1224px;
  }
  div.footer {
    width:1224px;
  }
  div#contentbuffer {
    margin:0;
  }
  div.browser-connect {
    margin:auto;
  }
  div.ui {
    width:1224px;
  }
  div.output {
  }
---
<div id='connect-status'></div>
<div id="ui">
    <object id="pbsvg" width="850" height="513" type="image/svg+xml" data="pb.svg">
</object>
<div id="output">
<div id="ui-output"></div>
<div id="console-output"></div>
</div>
</div>
<div style="clear:both;"></div>

<script>
var HW = (function() {
    var hw;

    function init() {
        hw = {};

        hw.call = function(name, args, callback) {
            if (!hw.b) {
                hw.b = require('bonescript');
            }
            if (!hw.b) return;
            if (typeof hw.b[name] != 'function') return;
            args.push(callback);
            hw.b[name].apply(null, args);
            return;
        }

        return hw;
    }

    return {
        get: function() {
            if (!hw) {
                hw = init();
            }
            return hw;
        }
    };
})();

var UI = (function() {
    var ui;

    function init() {
        ui = {};
        document.getElementById("pbsvg").addEventListener("load", function() {
            var doc = this.getSVGDocument();
            for(var j=1; j<=2; j++) {
                for(var i=1; i<=36; i++) {
                    var pinName = "P" + j + "_" + i;
                    var pin = doc.getElementById(pinName);
                    pin.addEventListener("mouseover",function() {
                            setPinHover(this.id);
                        }
                    );
                }
            }
            for(var i=0; i<4; i++) {
                var pinName = "USR" + i;
                var pin = doc.getElementById(pinName);
                pin.addEventListener("mouseover",function() {
                        setPinHover(this.id);
                    }
                );
            }
        });
        function setPinHover(name) {
            document.getElementById("ui-output").innerHTML = name;
            HW.get().call("getPinMode", [name], onGetPinMode);
        }

        function onGetPinMode(x) {
            document.getElementById("ui-output").innerHTML =
                JSON.stringify(x);
        }

        return ui;
    } // end of ui's init()


    return {
        get: function() {
            if (!ui) {
                ui = init();
            }
            return ui;
        }
    };
})();


function pbui() {
    UI.get();
}

var ui = pbui();
</script>
